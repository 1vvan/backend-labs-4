## 1. Authorization Code Flow

Коли використовується:
Для звичайних вебдодатків з бекендом, які можуть зберігати `client_secret`.

 ### Запит:
```bash
curl -X POST http://localhost:8080/realms/ivan/protocol/openid-connect/token \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=authorization_code" \
  -d "client_id=nest-app" \
 -d "code=a79c362b-8477-4467-83f7-e29d8653e2f8.9e83ea6a-28c6-4791-a054-abf6bf336b5e.3b4d214f-9adb-4fae-b8a2-c310e7120462" \
  -d "redirect_uri=http://localhost:3000"
```

 ### Параметри відповіді:
`access_token`: JWT токен 
`expires_in`: час (в секундах), через який токен доступу стане недійсним. У вашому випадку це 300 секунд (5 хвилин).
`refresh_token`: оновлює access_token без повторного логіну
`refresh_expires_in`: час (в секундах), після якого токен оновлення (refresh token) стане недійсним. У вашому випадку це 1800 секунд (30 хвилин).
`id_token`: ідентифікаційний токен
`token_type`: тип токену, у вашому випадку це Bearer. Це вказує, що токен доступу `використовується`: в якості Bearer токену в заголовку запиту.
`not-before-policy`: момент часу (в секундах з початку епохи), до якого токен не може бути використаний. У вашому випадку це 0, що означає, що немає обмеження.
`session_state`: унікальний ідентифікатор сесії, що використовується для відстеження сеансу користувача.
`scope`: перелік доступних прав доступу. У вашому випадку це profile і email, що вказує на доступ до профілю та електронної пошти користувача.

### Повна відповідь:
```bash
{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmcW5kRmhoeERmeHAydl92RWFzM2J6TXJzMDZFUnZXZVI0ZlZ6dEVMM0xnIn0.eyJleHAiOjE3NDU0Mzk1NjEsImlhdCI6MTc0NTQzOTI2MSwiYXV0aF90aW1lIjoxNzQ1NDM5MDc5LCJqdGkiOiIyOTRhNjk2ZC1kNmU4LTRiMDUtOGMyYy01ZDQ5NTU3NmQ4ZTUiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVhbG1zL2l2YW4iLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMWQ3ZjZkNzgtZmNjMy00Zjc5LWEyMTUtY2JmOWMzOTkzMzdkIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoibmVzdC1hcHAiLCJzZXNzaW9uX3N0YXRlIjoiOWU4M2VhNmEtMjhjNi00NzkxLWEwNTQtYWJmNmJmMzM2YjVlIiwiYWNyIjoiMCIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLWl2YW4iLCJvZmZsaW5lX2FjY2VzcyIsImFwcC1hZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsibmVzdC1hcHAiOnsicm9sZXMiOlsiYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6IjllODNlYTZhLTI4YzYtNDc5MS1hMDU0LWFiZjZiZjMzNmI1ZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoidXNlcjEifQ.beETnRN0JE-94NKrZQMwa6UUG7gx5C1xAFxtIJgEmA6nJbhlLm0ULSW1T4RObpcIlsE7bHVtZy-FxN5-pxFeof-EGq4IyEfbLBLpCDy9FrStu57VsZZvD61hqR__engWjaEarNBzj-osz-xBaALuc17zdaKGLdpP5YynVOMdrLbS1vydo4t3lyxNt9t03wzpw9YKLH5tvhpSPS9fEwHGMS-FVYCMDR06Pmr0CZ0GG9rMbtZDgGGC7gyaeXKwGWaTAWcLUlY-NzmSojyQDUjmUcgkv1ZYUZM0c3BbnCZ2UkhUKzTI6Y-tuv_lxCZ649_BuQBC3yWawe3gfEUwhLHIlw","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhMGJiODA2Ny1hMzQ4LTQzYmItYTFlZC1kZGQyNDkzZTE2NmIifQ.eyJleHAiOjE3NDU0NDEwNjEsImlhdCI6MTc0NTQzOTI2MSwianRpIjoiYTQ0MGJmYTEtYTAzYi00YmRmLTkzODctNWI0ZTIxMWE0ZmFlIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pdmFuIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pdmFuIiwic3ViIjoiMWQ3ZjZkNzgtZmNjMy00Zjc5LWEyMTUtY2JmOWMzOTkzMzdkIiwidHlwIjoiUmVmcmVzaCIsImF6cCI6Im5lc3QtYXBwIiwic2Vzc2lvbl9zdGF0ZSI6IjllODNlYTZhLTI4YzYtNDc5MS1hMDU0LWFiZjZiZjMzNmI1ZSIsInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6IjllODNlYTZhLTI4YzYtNDc5MS1hMDU0LWFiZjZiZjMzNmI1ZSJ9.xdeUcgOEtxdT5p8JCdOOEVDX78hozdk7i5CqO8RF2MI","token_type":"Bearer","not-before-policy":0,"session_state":"9e83ea6a-28c6-4791-a054-abf6bf336b5e","scope":"profile email"}
```



## 2. Implicit Flow

### Коли використовується:
Для односторінкових додатків (SPA), де немає безпечного бекенду.

### Отримання токену:
Використовується URL:
```
http://localhost:8080/realms/ivan/protocol/openid-connect/auth?
client_id=nest-app&
response_type=token&
redirect_uri=http://localhost:3000&
scope=openid
```

### Відповідь:
У `redirect_uri` браузер перенаправляє на:
``` bash
http://localhost:3000/#session_state=9e83ea6a-28c6-4791-a054-abf6bf336b5e&access_token=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmcW5kRmhoeERmeHAydl92RWFzM2J6TXJzMDZFUnZXZVI0ZlZ6dEVMM0xnIn0.eyJleHAiOjE3NDU0NDAzOTUsImlhdCI6MTc0NTQzOTQ5NSwiYXV0aF90aW1lIjoxNzQ1NDM5MDc5LCJqdGkiOiI1YzdkMWFkOC03YTJlLTQzOWQtYWE0YS1mNmNhYmI2YzkwMzYiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVhbG1zL2l2YW4iLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMWQ3ZjZkNzgtZmNjMy00Zjc5LWEyMTUtY2JmOWMzOTkzMzdkIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoibmVzdC1hcHAiLCJzZXNzaW9uX3N0YXRlIjoiOWU4M2VhNmEtMjhjNi00NzkxLWEwNTQtYWJmNmJmMzM2YjVlIiwiYWNyIjoiMCIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLWl2YW4iLCJvZmZsaW5lX2FjY2VzcyIsImFwcC1hZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsibmVzdC1hcHAiOnsicm9sZXMiOlsiYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5ZTgzZWE2YS0yOGM2LTQ3OTEtYTA1NC1hYmY2YmYzMzZiNWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InVzZXIxIn0.Wr3CUJpuS0JkZpCv_LpIXwhTJY-vUfsswYJ7WJa96hmmyt2C5r9ZjfFlsoM6AfAnrIXcD7Nak-Z682OWMMKSjSS_WfH1JZRLB8ShSsSAgIwkgP28zNZ8PivphwILHiGVsGweADtwnOjJ0oqNQM2Fh_X3T2tbsAmvoRojsNZf9yAudyF5SWSWgRbori4arflIQAmW6M_qMYh5kmUd4aO56tect-jSvQvS180pjqdju5xvOdgRa6ykE9Oaq2-109xNiQYA8cwtDJnqISG2lcxd9L3ZV8zHbH3_LkCZHUJCmWAeraEQekONcEgOVFgUR_MoOz30X51IH2xAYpHbXujsnQ&token_type=Bearer&expires_in=900
```



## 3. Password Flow 

### Коли використовується:
Для додатків, які можуть напряму зберігати логін/пароль користувача.

### Запит:
```bash
curl -X POST http://localhost:8080/realms/ivan/protocol/openid-connect/token \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=password" \
  -d "client_id=nest-app" \
  -d "username=user1" \
  -d "password=1234"
```

### Відповідь:
``` bash
{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmcW5kRmhoeERmeHAydl92RWFzM2J6TXJzMDZFUnZXZVI0ZlZ6dEVMM0xnIn0.eyJleHAiOjE3NDU0Mzk5OTgsImlhdCI6MTc0NTQzOTY5OCwianRpIjoiYzFiZWZlYzctNjM3OC00Zjc3LTlmOTMtMjE4YmQzNTJhZmUyIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pdmFuIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjFkN2Y2ZDc4LWZjYzMtNGY3OS1hMjE1LWNiZjljMzk5MzM3ZCIsInR5cCI6IkJlYXJlciIsImF6cCI6Im5lc3QtYXBwIiwic2Vzc2lvbl9zdGF0ZSI6IjAyYjJhMzc0LTg2ODEtNDUwNS1iMDQ5LWQ5YTJkMGQ4NWY5YyIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1pdmFuIiwib2ZmbGluZV9hY2Nlc3MiLCJhcHAtYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7Im5lc3QtYXBwIjp7InJvbGVzIjpbImFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJzaWQiOiIwMmIyYTM3NC04NjgxLTQ1MDUtYjA0OS1kOWEyZDBkODVmOWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InVzZXIxIn0.Tn3XPev5FcOGvv_McO790NwdhLVw89OC2p-wI5jUohaMyb7_cquQRZ4e7Z_6NDz622QxSSWCziiyvj6Qz2Jf05DnlNPw_Q_JCc89-idV8St2PWeIMD11gqCkwKDk-qjh5386dBMxcfxL8_lrOtLjx9fTldbh7AIkkWFsUVMJYJSqhq42W7Bm_GdrreubxYnUKrndQk-pRAhIUfqgNlyzBe6MeZyj-gXTx1afBZGFuHpycCuaHqx8YbNtYAvb83gec0sbJGi_CLGSFIahS9N0MdXRVY1PxUzwN6wKLIv8iJyOJDyEDIJIGOSb_mniL4DjuVnceHfscTMHxlsf7c2YWA","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhMGJiODA2Ny1hMzQ4LTQzYmItYTFlZC1kZGQyNDkzZTE2NmIifQ.eyJleHAiOjE3NDU0NDE0OTgsImlhdCI6MTc0NTQzOTY5OCwianRpIjoiMDEwMDI1ZTUtMWEyZC00MDZhLTk5MjAtMGY4NDYwNDcyY2ZmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pdmFuIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pdmFuIiwic3ViIjoiMWQ3ZjZkNzgtZmNjMy00Zjc5LWEyMTUtY2JmOWMzOTkzMzdkIiwidHlwIjoiUmVmcmVzaCIsImF6cCI6Im5lc3QtYXBwIiwic2Vzc2lvbl9zdGF0ZSI6IjAyYjJhMzc0LTg2ODEtNDUwNS1iMDQ5LWQ5YTJkMGQ4NWY5YyIsInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6IjAyYjJhMzc0LTg2ODEtNDUwNS1iMDQ5LWQ5YTJkMGQ4NWY5YyJ9.FsjlpLlqKkorPqwHdZFFQIcR6JaYOhbyO6gkPqinFM8","token_type":"Bearer","not-before-policy":0,"session_state":"02b2a374-8681-4505-b049-d9a2d0d85f9c","scope":"profile email"}
```
Отримано `access_token` та `refresh_token`
Користувач був аутентифікований напряму



## 4. Client Credentials Flow

### Коли використовується:
Для сервісів або бекендів, які автентифікуються самостійно.

### Запит:
```bash
curl -X POST http://localhost:8080/realms/ican/protocol/openid-connect/token \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials" \
  -d "client_id=nest-app" \
  -d "client_secret=GHgeOdclH37IE5CfH9kSLR0fBVnm9pRk"
```

### Відповідь:
```bash
{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJqUnlma2hUR29rOE1nbmpFUGJPNzFZZWJhWlVKcjlPZVVxcWg1LWtTZk1ZIn0.eyJleHAiOjE3NDQ3NTM4MjUsImlhdCI6MTc0NDc1MzUyNSwiYXV0aF90aW1lIjoxNzQ0NzUyNzgxLCJqdGkiOiIzZWMzYzRjZi0xODU0LTQyNTctOWQ3Yy1hNWI4OTNlODNkOTIiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVhbG1zL09sZWtzYW5kZXIiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiODNiN2UyMDItZjU1Yy00OGFkLTgwMWItMzk1YjJkMDcyYzk0IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoid2ViLWNsaWVudCIsInNlc3Npb25fc3RhdGUiOiJlMTFiNjQ1Zi02YTkzLTQ3MGItYmZkNC1lNmU3Y2RhODdjY2IiLCJhY3IiOiIwIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1vbGVrc2FuZGVyIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJlMTFiNjQ1Zi02YTkzLTQ3MGItYmZkNC1lNmU3Y2RhODdjY2IiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJVc2VyIE9uZSIsInByZWZlcnJlZF91c2VybmFtZSI6InVzZXIxIiwiZ2l2ZW5fbmFtZSI6IlVzZXIiLCJmYW1pbHlfbmFtZSI6Ik9uZSIsImVtYWlsIjoidXNlcjFAZXhhbXBsZS5jb20ifQ.Nbzl0i8q0AlNZ7IkiScOp8IfDYlIKYzG21iBhsHZjp1hTPfiZnBZHRBAlLf6LYzkxNAmZ36eM777hnpNzkRPFSjhCoGUhTSsSmGpN6CJZwNi6LvFsHaGUglGx4eBSQSG-57rkaU2n4xS9wbpKMhBXAJa1UFF_z3VbFdTGqN0AgOdirkNW8QPFiDBt_-s9dxAN6p5Im5ZWepa1EzOQPpckBN2c6114t1dGrSzaqTcaIipYXkoFDyMnnNcQBlng2rGqfQa-o8ZTxd51R6dILO9a8AGkezpOMWyeSlpTg8Yv2R1f2SbTvnpMzRQ9HWHqyZ45X3Bx-9d5G3WUqu-pLbEnw","expires_in":300,"refresh_expires_in":1770,"refresh_token":"eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJkNDNjYTRjZi0xYmE4LTQ3NTItYWNiZi0xMjRjOWJhZDIzM2UifQ.eyJleHAiOjE3NDQ3NTUyOTUsImlhdCI6MTc0NDc1MzUyNSwianRpIjoiYTk2NmY4ZjUtOTE5Yi00OGQyLWI5Y2YtMmUwZDJmYTE2MTVjIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9PbGVrc2FuZGVyIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9PbGVrc2FuZGVyIiwic3ViIjoiODNiN2UyMDItZjU1Yy00OGFkLTgwMWItMzk1YjJkMDcyYzk0IiwidHlwIjoiUmVmcmVzaCIsImF6cCI6IndlYi1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiZTExYjY0NWYtNmE5My00NzBiLWJmZDQtZTZlN2NkYTg3Y2NiIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImUxMWI2NDVmLTZhOTMtNDcwYi1iZmQ0LWU2ZTdjZGE4N2NjYiJ9.73F4bm3QH3fEPOLH-vVWHYowoZy3wbyRDXiTf0heLz8OXYsSj3f-hVMcpHAtFeVbBL19rJBI4XtotQTM2xed7A","token_type":"Bearer","id_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJqUnlma2hUR29rOE1nbmpFUGJPNzFZZWJhWlVKcjlPZVVxcWg1LWtTZk1ZIn0.eyJleHAiOjE3NDQ3NTM4MjUsImlhdCI6MTc0NDc1MzUyNSwiYXV0aF90aW1lIjoxNzQ0NzUyNzgxLCJqdGkiOiIyZTQyMmFmNi0zN2I0LTQ3ODMtODJlMy1iNTY4ZDk4M2IxMDgiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVhbG1zL09sZWtzYW5kZXIiLCJhdWQiOiJ3ZWItY2xpZW50Iiwic3ViIjoiODNiN2UyMDItZjU1Yy00OGFkLTgwMWItMzk1YjJkMDcyYzk0IiwidHlwIjoiSUQiLCJhenAiOiJ3ZWItY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6ImUxMWI2NDVmLTZhOTMtNDcwYi1iZmQ0LWU2ZTdjZGE4N2NjYiIsImF0X2hhc2giOiJwbGROcnRGbEd0VXdqOGw1NWgwb2t3IiwiYWNyIjoiMCIsInNpZCI6ImUxMWI2NDVmLTZhOTMtNDcwYi1iZmQ0LWU2ZTdjZGE4N2NjYiIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlVzZXIgT25lIiwicHJlZmVycmVkX3VzZXJuYW1lIjoidXNlcjEiLCJnaXZlbl9uYW1lIjoiVXNlciIsImZhbWlseV9uYW1lIjoiT25lIiwiZW1haWwiOiJ1c2VyMUBleGFtcGxlLmNvbSJ9.k3R1Z_isj2eXQyZfm0Fan4g07tU-ab0PbeljUdsW9gMdPER6XyrwBTnxaKDZ5rLEZLcHp7EqJHsOer5d0FU0GTLsqzaM05c9iLZ0UZnlLhNdf37dAqXgZypWSxKBVYJjxxdxqxxoDeG9ZvW2rLA1YGOBKomXkRTflzhwWvyKE01rk-LhKsdLgnB9JSRa96dSQx6BWH9HJjbR8SacpNupchMfTP3G_v1v_ud4Qzk6UAGBVjweUiZyd-L5mLIZGSE52RiX8oK8VCA9hKrVnZI7CTGnCBxmVQs0z0Rjc0yhksx06NLaSdPPI5k-6M9tdve-ooaJ8Ul5gBu8L2QJ3191gg","not-before-policy":0,"session_state":"e11b645f-6a93-470b-bfd4-e6e7cda87ccb","scope":"openid email profile"}%
```

Отримано `access_token` для сервісного клієнта
Користувач відсутній, автентифіковано сам клієнт